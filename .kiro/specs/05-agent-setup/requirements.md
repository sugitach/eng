# 05-agent-setup: Requirements

## 1. 起動シーケンス
1. **エントリーポイント**: `eng-agent` が最初に起動されるプロセスであること。
2. **子プロセスの起動**: Agentは起動時に `eng-ui` (ローカル) および `eng-core` (ローカル/リモート) を子プロセスとして起動すること。
3. **認証の中継**: AgentはCoreから受け取った認証情報をUIに伝え、UI-Agent間の通信も保護すること。

## 2. 通信トポロジーとマルチUI/Core
1. **UI <-> Agent**: UIはAgentに接続し、ユーザー入力を送り、描画命令を受け取る。
2. **Agent <-> Core**: Agentは複数のCoreに接続し、バッファ操作を行い、状態を受け取る。
3. **複数UIサポート**: 1つのAgentに対して複数のUIプロセスが接続可能であること。
4. **複数・リモートCoreサポート**: Agentはローカルおよびリモートホスト上の複数のCoreプロセスを透過的に管理・操作できること。
5. **1プロセス1ウィンドウ**: UIプロセスは単一のOSウィンドウを担当する。新しいウィンドウを開く操作は、新しいUIプロセスの起動となる。

## 3. ルーティング
1. **コンテキスト**: Agentは、各UIからのリクエストが「どのウィンドウ（UI ID）」からのものかを識別できること。